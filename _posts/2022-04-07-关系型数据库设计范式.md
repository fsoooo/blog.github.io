为了建立冗余较小、结构合理的数据库，设计数据库时必须遵循一定的规则。

在关系型数据库中这种规则就称为范式。范式是符合某一种设计要求的总结。

要想设计一个结构合理的关系型数据库，必须满足一定的范式。

      范式的目标：

      应用数据库范式可以带来许多好处，但是最重要的好处归结为三点：

      1.减少数据冗余（这是最主要的好处，其他好处都是由此而附带的）

      2.消除异常（插入异常，更新异常，删除异常）

      3.让数据组织的更加和谐…


>简单的说，**范式是为了消除重复数据减少冗余数据，从而让数据库内的数据更好的组织，让磁盘空间得到更有效利用的一种标准化标准，满足高等级的范式的先决条件是满足低等级范式。(比如满足2nf一定满足1nf)**


![](https://upload-images.jianshu.io/upload_images/6943526-f0f07bcacb1263fb.gif?imageMogr2/auto-orient/strip)

在实际开发中最为常见的设计范式有三个：

## 第一范式(确保每列保持原子性)

定义： 属于第一范式关系的所有属性都不可再分，即数据项不可分。

理解： 第一范式强调数据表的**原子性**，是其他范式的基础。

第一范式是最基本的范式。如果数据库表中的所有字段值都是不可分解的原子值，就说明该数据库表满足了第一范式。

第一范式的合理遵循需要根据系统的实际需求来定。

比如某些数据库系统中需要用到“地址”这个属性，本来直接将“地址”属性设计成一个数据库表的字段就行。但是如果系统经常会访问“地址”属性中的“城市”部分，那么就非要将“地址”这个属性重新拆分为省份、城市、详细地址等多个部分进行存储，这样在对地址中某一部分操作的时候将非常方便。

这样设计才算满足了数据库的第一范式，如下表所示。

![](https://upload-images.jianshu.io/upload_images/6943526-f592f0fb878bbda0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

上表所示的用户信息遵循了第一范式的要求，这样在对用户使用城市进行分类的时候就非常方便，也提高了数据库的性能。

但日常生活中仅用第一范式来规范表格是远远不够的，依然会存在数据冗余过大、删除异常、插入异常、修改异常的问题，此时就需要引入规范化概念，将其转化为更标准化的表格，减少数据依赖。

规范化： 一个低一级的关系模式通过模式分解可以转化为若干个高一级范式的关系模式的集合，这个过程叫做规范化。

## 第二范式(确保表中的每列都和主键相关)

第二范式在第一范式的基础之上更进一层。

 第二范式是指每个表必须有一个（有且仅有一个）数据项作为关键字或主键（primary key），其他数据项与关键字或者主键一一对应，即其他数据项完全依赖于关键字或主键。由此可知单主属性的关系均属于第二范式。

判断一个关系是否属于第二范式：

1.找出数据表中的所有码；
2.找出所有主属性和非主属性；
3.判断所有的非主属性对码的部分函数依赖。

第二范式需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）。

>**也就是说在一个数据库表中，一个表中只能保存一种数据，不可以把多种数据保存在同一张数据库表中。**

比如要设计一个订单信息表，因为订单中可能会有多种商品，所以要将订单编号和商品编号作为数据库表的联合主键，如下表所示。

**订单信息表**

![](https://upload-images.jianshu.io/upload_images/6943526-ba5e78e9fdd61250.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

这样就产生一个问题：这个表中是以订单编号和商品编号作为联合主键。

这样在该表中商品名称、单位、商品价格等信息不与该表的主键相关，而仅仅是与商品编号相关。

所以在这里违反了第二范式的设计原则。

而如果把这个订单信息表进行拆分，把商品信息分离到另一个表中，把订单项目表也分离到另一个表中，就非常完美了。如下所示。

![](https://upload-images.jianshu.io/upload_images/6943526-a47c7d30a855f271.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

这样设计，在很大程度上减小了数据库的冗余。如果要获取订单的商品信息，使用商品编号到商品信息表中查询即可。

## 第三范式(确保每列都和主键列直接相关,而不是间接相关)

第三范式需要确保数据表中的**每一列数据都和主键直接相关**，而不能间接相关。

比如在设计一个订单数据表的时候，可以将客户编号作为一个外键和订单表建立相应的关系。而不可以在订单表中添加关于客户其它信息（比如姓名、所属公司等）的字段。

如下面这两个表所示的设计就是一个满足第三范式的数据库表。

![](https://upload-images.jianshu.io/upload_images/6943526-9554f273ba30f68d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

这样在查询订单信息的时候，就可以使用客户编号来引用客户信息表中的记录，也不必在订单信息表中多次输入客户信息的内容，减小了数据冗余。


常用的3中范式讲完了，除了这些，还有巴斯-科德范式（BCNF）、第四范式、第五范式（5NF，又称完美范式）。

![](https://upload-images.jianshu.io/upload_images/6943526-1aa751a5ea71e052.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![](https://upload-images.jianshu.io/upload_images/6943526-fd91714a75929d87.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

##小结

上面对于数据库范式进行分解的过程中不难看出，应用的范式登记越高，则表越多。

表多会带来很多问题：**查询时要连接多个表，增加了查询的复杂度；查询时需要连接多个表，降低了数据库查询性能。**

而现在的情况，磁盘空间成本基本可以忽略不计，所以数据冗余所造成的问题也并不是应用数据库范式的理由。

因此，**`并不是应用的范式越高越好，要看实际情况而定`**。第三范式已经很大程度上减少了数据冗余，并且减少了造成插入异常，更新异常，和删除异常了。

![](https://upload-images.jianshu.io/upload_images/6943526-9e17d2c1e5706047.gif?imageMogr2/auto-orient/strip)



